!function(e){var t={};function a(n){if(t[n])return t[n].exports;var c=t[n]={i:n,l:!1,exports:{}};return e[n].call(c.exports,c,c.exports,a),c.l=!0,c.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)a.d(n,c,function(t){return e[t]}.bind(null,c));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=5)}([function(e,t){e.exports=window.wp.element},function(e,t,a){e.exports=a(3)()},function(e,t){e.exports=window.lodash},function(e,t,a){"use strict";var n=a(4);function c(){}function o(){}o.resetWarningCache=c,e.exports=function(){function e(e,t,a,c,o,r){if(r!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:c};return a.PropTypes=a,a}},function(e,t,a){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,a){"use strict";a.r(t);var n=a(0);const c={},{createElement:o}=wp.element;c.fast=o("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTZweCIgaGVpZ2h0PSIyNHB4IiB2aWV3Qm94PSIwIDAgMTYgMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+UGF0aDwvdGl0bGU+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iRmFzdC1Mb2dvQmxhY2siIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNS4xNTIzLDQgTDQuNzUzNjYsNCBMNC43NTM2Niw5LjU4Njc4IEwxMy43NjU4LDkuNTg2NzggTDEzLjc2NTgsMTMuNTg2OCBMNC43NTM2NiwxMy41ODY4IEw0Ljc1MzY2LDIzLjYwMzMgTDAsMjMuNjAzMyBMMCwxLjkxNzM2IEMwLDEuMzQ0MzUgMC4xOTgwNjksMC44ODE1NDMgMC41OTQyMDcsMC41Mjg5MjcgQzAuOTkwMzQ2LDAuMTc2MzA5IDEuNDYzNTEsMCAyLjAxMzcsMCBMMTUuMTUyMywwIEwxNS4xNTIzLDQgWiIgaWQ9IlBhdGgiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="}),c.lock=o("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxMyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMS4wODc0IDYuMTM1NzNIMTEuNDY5N0MxMS44OTE5IDYuMTUxNCAxMi4yODk5IDYuMzE1NjkgMTIuNTc2NSA2LjU5MjYxQzEyLjg2MzIgNi44Njk1MyAxMy4wMTUgNy4yMzY0OCAxMi45OTg4IDcuNjEzMDdWMTMuNTIyNkMxMy4wMTUgMTMuODk5MiAxMi44NjMyIDE0LjI2NjIgMTIuNTc2NiAxNC41NDMxQzEyLjI4OTkgMTQuODIgMTEuODkxOSAxNC45ODQzIDExLjQ2OTcgMTVIMS41MzAzMUMxLjEwODEgMTQuOTg0MyAwLjcxMDA3NiAxNC44MiAwLjQyMzQ1MSAxNC41NDMxQzAuMTM2ODI2IDE0LjI2NjIgLTAuMDE1MDI0MiAxMy44OTkyIDAuMDAxMTc0ODkgMTMuNTIyNlY3LjYxMzA3Qy0wLjAxNTAxMzggNy4yMzY0OSAwLjEzNjg0MSA2Ljg2OTUzIDAuNDIzNDY1IDYuNTkyNjJDMC43MTAwODkgNi4zMTU3IDEuMTA4MTEgNi4xNTE0MSAxLjUzMDMxIDYuMTM1NzNIMS45MTI1OVYzLjc0NzU1QzEuOTEyNTkgMi4zNzMzOCAyLjIzNjA4IDEuNTcyNzcgMi45NTU4MSAwLjkzMDc1MUMzLjY3NTUzIDAuMjg4NzM3IDQuNTcyNjQgMCA2LjExMjgyIDBINi44ODcxQzguNDI3MjggMCA5LjMyNDUgMC4yODg3MDMgMTAuMDQ0MiAwLjkzMDc1MUMxMC43NjM5IDEuNTcyOCAxMS4wODc0IDIuMzczMzggMTEuMDg3NCAzLjc0NzU1VjYuMTM1NzNaTTkuNTU4MjcgMy43NDgxM0M5LjU1ODI3IDIuODczNjcgOS4zNTIzMyAyLjM2NDIxIDguODk0NCAxLjk1NTY0QzguNDM2NDYgMS41NDcwNiA3Ljg2NTUyIDEuMzYzMzYgNi44ODUzNCAxLjM2MzM2SDYuMTE0ODFDNS4xMzQ2NyAxLjM2MzM2IDQuNTYzNjkgMS41NDcwNiA0LjEwNTc5IDEuOTU1NjRDMy42NDc5IDIuMzY0MjEgMy40NDE3MyAyLjg3MzY3IDMuNDQxNzMgMy43NDgxM1Y2LjEzNTczSDkuNTU4MjdWMy43NDgxM1oiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo="});var r=c;const{__:__}=wp.i18n,{Icon:s}=wp.components;var i=e=>{const{type:t}=e;let a=__("Fast Checkout");return"login"===t&&(a=__("Fast Login")),Object(n.createElement)("button",{className:"fastwc-button"},Object(n.createElement)(s,{icon:r.lock}),a)},l=a(2);const u=wp.apiFetch,{addQueryArgs:d}=wp.url;var p=a(1),M=a.n(p);const{__:g}=wp.i18n,{useState:y,useEffect:b}=wp.element,{TextControl:N,RadioControl:I}=wp.components,m=({onChange:e,selected:t})=>{const[a,c]=y([]),[o,r]=y(!0),[s,i]=y(t),[p,M]=y(!0);b(()=>{m({selected:t})},[]);const m=async({selected:e,search:t=""})=>{const a=await(async({selected:e=0,search:t=""})=>{const a={per_page:(()=>{const e=window.wcSettings||{},t=e.hasOwnProperty("wcBlocksConfig")?e.wcBlocksConfig:{};return t.hasOwnProperty("productCount")?t.productCount:100})()>100?100:0,catalog_visibility:"any",search:t,orderby:"title",order:"asc"},n=[];if(e){const t=[e];n.push(d("/wc/store/products",{catalog_visibility:"any",include:t}))}n.push(d("/wc/store/products",a));const c=await Promise.all(n.map(e=>u({path:e})));return Object(l.uniqBy)(c.flat(),"id").map(e=>({label:e.name,value:e.id}))})({selected:e,search:t});c(a),r(!1),M(!1)};return Object(n.createElement)("div",null,Object(n.createElement)(N,{label:g("Product"),onChange:e=>{r(!0),m({selected:s,search:e})},className:"fastwc-product-search",placeholder:g("Search for product...")}),Object(n.createElement)("div",{className:"fastwc-product-search--products-wrapper"},o?Object(n.createElement)("div",{className:"fastwc-product-search--loading"},g("Loading...")):Object(n.createElement)(I,{selected:s,options:a,onChange:t=>{const a=parseInt(t,10);i(a),p||e(a)}})))};m.propTypes={onChange:M.a.func.isRequired,selected:M.a.number},m.defaultProps={selected:0};var j=m;const{__:w}=wp.i18n,{useState:v,useEffect:f}=wp.element,{SelectControl:O}=wp.components,D=({onChange:e,product:t,variant:a})=>{const c={label:w("Select a variation..."),value:""},o={label:w("No variations available"),value:""},r=[{label:w("Loading variations..."),value:""}],[s,i]=v(!0),[l,p]=v(r);return f(()=>{(async()=>{const n=await(r=t,u({path:d("/wc/store/products",{per_page:0,type:"variation",parent:r})}));var r;let l=[],M=[];n.length?(l=n.map(e=>({label:e.variation,value:e.id})),M=n.map(e=>e.id),l.unshift(c)):l=[o],s||a&&M.includes(a)||e(""),p(l),i(!1)})()},[t]),Object(n.createElement)("div",null,Object(n.createElement)(O,{label:w("Variation"),options:l,onChange:t=>{s||e(t)},value:a}))};D.propTypes={onChange:M.a.func.isRequired,product:M.a.number},D.defaultProps={product:0};var T=D;const{SelectControl:C}=wp.components,h=({onChange:e,attKey:t,label:a,options:c,selected:o})=>Object(n.createElement)(C,{label:a,onChange:a=>{e(t,a)},options:c,value:o});h.propTypes={onChange:M.a.func.isRequired,attKey:M.a.string,label:M.a.string,options:M.a.array,selected:M.a.string},h.defaultProps={options:[]};var E=h;const{__:z}=wp.i18n,{useState:k,useEffect:A}=wp.element,x=({onChange:e,product:t,variant:a,selected:c})=>{const[o,r]=k([]),[s,i]=k([]),[l,p]=k([]),[M,g]=k(!0);A(()=>{(async()=>{var n;const o=await(async(e,t)=>{const a=d("/wc/fast/v1/product/attributes",{productId:e,variantId:t});return await u({path:a})})(t,a),s={},l={};Object.keys(c).map(e=>{var t,a,n;let r=[];null!==(t=o.options)&&void 0!==t&&null!==(a=t[e])&&void 0!==a&&a.length&&(r=o.options[e].map(e=>e.value)),null!==(n=o.attKeys)&&void 0!==n&&n.includes(e)&&r.includes(c[e])&&(l[e]=c[e])}),null!==(n=o.attKeys)&&void 0!==n&&n.length&&(o.attKeys.map(e=>{if(o.values[e])l[e]=o.values[e],s[e]=[{value:o.values[e],label:o.values[e]}];else if(s[e]=o.options[e],!l[e]&&o.options[e].length){const t=o.options[e][0];l[e]=t.value}}),r(o.attKeys),i(o.labels)),M||e(l),p(s),g(!1)})()},[t,a]);const y=(t,a)=>{const n={...c};n[t]=a,M||e(n)};let b="";return t?a||(b=z("Please select a product variation to see the available options.")):b=z("Please select a product and a product variation to see the available options."),Object(n.createElement)("div",{className:"fastwc-product-attributes"},Object(n.createElement)("h3",null,z("Product Options:")),b&&Object(n.createElement)("div",null,b),o&&o.map(e=>Object(n.createElement)(E,{key:e,attKey:e,label:s[e],options:l[e],onChange:y,selected:c[e]?c[e]:""})))};x.propTypes={onChange:M.a.func.isRequired,product:M.a.number,variant:M.a.number,selected:M.a.object},x.defaultProps={product:0,variant:0,selected:{}};var L=x;const{__:_}=wp.i18n,{registerBlockType:S}=wp.blocks,{InspectorControls:P}=wp.blockEditor,{Panel:U,PanelBody:Q,PanelRow:Y,TextControl:B}=wp.components;S("fastwc/fast-pdp-button",{title:_("Fast Checkout Product Button","fast"),icon:r.fast,keywords:[_("fast"),_("checkout"),_("button")],attributes:{product_id:{type:"integer",default:0},variant_id:{type:"integer",default:0},quantity:{type:"integer",default:1},product_options:{type:"object",default:{}}},edit:e=>{const{attributes:t,setAttributes:a}=e,{product_id:c,variant_id:o,quantity:r,product_options:s}=t;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(P,{key:"fast-pdp-inspector-controls"},Object(n.createElement)(U,null,Object(n.createElement)(Q,{title:_("Product Details")},Object(n.createElement)(j,{onChange:e=>{const t=parseInt(e,10);a({product_id:isNaN(t)?void 0:t})},selected:c}),Object(n.createElement)(T,{onChange:e=>{const t=parseInt(e,10);a({variant_id:isNaN(t)?void 0:t})},product:c,variant:o}),Object(n.createElement)(B,{label:_("Quantity"),type:"number",onChange:e=>{const t=parseInt(e,10);a({quantity:isNaN(t)?void 0:t})},value:Number.isInteger(r)?r.toString(10):"1",step:"1"}),Object(n.createElement)(L,{onChange:e=>{a({product_options:e})},product:c,variant:o,selected:s})))),Object(n.createElement)(i,{type:"checkout"}))},save:()=>null});const{__:Z}=wp.i18n,{registerBlockType:G}=wp.blocks;G("fastwc/fast-cart-button",{title:Z("Fast Checkout Cart Button","fast"),icon:r.fast,keywords:[Z("fast"),Z("checkout"),Z("button")],attributes:{},edit:e=>Object(n.createElement)(i,{type:"checkout"}),save:()=>null});const{__:R}=wp.i18n,{registerBlockType:q}=wp.blocks;q("fastwc/fast-login-button",{title:R("Fast Login Button","fast"),icon:r.fast,keywords:[R("fast"),R("login"),R("button")],attributes:{},edit:e=>Object(n.createElement)(i,{type:"login"}),save:()=>null});const{select:F,subscribe:H}=wp.data;const{__:W}=wp.i18n,{select:V,dispatch:K,subscribe:J}=wp.data,{ClipboardButton:$,TextControl:X,TextareaControl:ee}=wp.components,{useState:te,useEffect:ae}=wp.element,{addQueryArgs:ne}=wp.url,ce=()=>V("core/editor").getEditedPostAttribute("status"),oe=()=>V("core/editor").getPermalink();const{__:re}=wp.i18n,{registerBlockType:se,unregisterBlockType:ie}=wp.blocks;se("fastwc/fast-headless",{title:re("Fast Headless Checkout Link","fast"),icon:r.fast,keywords:[re("fast"),re("checkout"),re("headless")],attributes:{productId:{type:"integer",default:0},variantId:{type:"integer",default:0},quantity:{type:"integer",default:1},productOptions:{type:"object",default:{}}},edit:e=>{const{attributes:t,setAttributes:a}=e,{productId:c,variantId:o,quantity:r,productOptions:s}=t,i={productId:0,variantId:0,quantity:1,productOptions:{}},l=ce(),u=oe(),d=((e={...t})=>{var a,n,c,o;const{productId:r,variantId:s,quantity:i,productOptions:l}=e,u=null===(a=window)||void 0===a||null===(n=a.fastwcHeadless)||void 0===n?void 0:n.appId,d=null===(c=window)||void 0===c||null===(o=c.fastwcHeadless)||void 0===o?void 0:o.fastJs;return`<fast-checkout-button app_id="${u}" product_id="${r}" variant_id="${s}" quantity="${i}" product_options="${JSON.stringify(l).replace(/"/g,"&quot;")}"></fast-checkout-button>\n<script src="${d}" />`})(),[p,M]=te(!1),[g,y]=te(u),[b,N]=te(!1),[I,m]=te(d),[w,v]=te("publish"===l);J(()=>{const e=ce();v("publish"===e);const t=oe();y(t)});const f=(e,t)=>{const a={...V("core/editor").getEditedPostAttribute("meta")};a[e]=t,K("core/editor").editPost({meta:a})};return Object(n.createElement)("div",{className:"fastwc-headless-link-generator"},Object(n.createElement)("h2",{className:"fastwc-headless-link-generator--header"},W("Fast Headless Checkout Link Generator")),Object(n.createElement)("p",{className:"fastwc-headless-link-generator--description"},W("Generate a headless checkout link by selecting a product and setting a quantity below. Optionally, you can select a product variation and product options if available.")),Object(n.createElement)(j,{onChange:e=>{const n=parseInt(e,10),c=isNaN(n)?i.productId:n;f("fastwc_product_id",c),a({productId:c}),m({...t,productId:c})},selected:c}),Object(n.createElement)(T,{onChange:e=>{const n=parseInt(e,10),c=isNaN(n)?i.variantId:n;f("fastwc_variant_id",c),a({variantId:c}),m({...t,variantId:c})},product:c,variant:o}),Object(n.createElement)(X,{label:W("Quantity"),type:"number",onChange:e=>{const n=parseInt(e,10),c=isNaN(n)?i.quantity:n;f("fastwc_quantity",c),a({quantity:c}),m({...t,quantity:c})},value:Number.isInteger(r)?r.toString(10):i.quantity.toString(10),step:"1"}),Object(n.createElement)(L,{onChange:e=>{f("fastwc_product_options",JSON.stringify(e)),a({productOptions:e}),m({...t,productOptions:e})},product:c,variant:o,selected:s}),c?Object(n.createElement)("div",{className:"fastwc-headless-link-generator--link-urls"},w?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("h3",null,W("Headless Checkout Link URL")),Object(n.createElement)("div",{className:"fastwc-headless-link-generator--description"},Object(n.createElement)("div",null,Object(n.createElement)("strong",null,W("WordPress Permalink"))),Object(n.createElement)(X,{disabled:!0,value:g}),Object(n.createElement)($,{variant:"primary",isPrimary:!0,text:g,onCopy:()=>M(!0),onFinishCopy:()=>M(!1)},W(p?"Copied!":"Click to Copy"))),Object(n.createElement)("hr",null)):"",Object(n.createElement)("h3",null,W("Headless Checkout Button")),Object(n.createElement)("div",{className:"fastwc-headless-link-generator--description"},Object(n.createElement)(ee,{disabled:!0,value:I}),Object(n.createElement)($,{variant:"primary",isPrimary:!0,text:I,onCopy:()=>N(!0),onFinishCopy:()=>N(!1)},W(b?"Copied!":"Click to Copy")))):"")},save:()=>null}),(async()=>{await(async()=>new Promise(e=>{const t=H(()=>{F("core/editor").getCurrentPostType()&&(t(),e())})}))(),"fastwc_headless_link"!==wp.data.select("core/editor").getCurrentPostType()&&ie("fastwc/fast-headless")})()}]);